#N canvas 26 22 1624 995 10;
#X text 422 -557 recording length (ms);
#X floatatom 381 -557 5 0 0 0 - - -;
#X text 236 -472 determine phasor speed;
#X obj 381 -220 *~;
#X obj 433 -307 / 1000;
#X obj 381 -150 *~ 44100;
#X obj 381 -308 phasor~;
#X obj -276 -869 inlet;
#X obj 381 34 outlet~;
#X obj 537 -239 outlet~;
#X text 67 -182 which table to play back from?;
#X msg 258 -134 set \$1;
#X obj 258 -156 tosymbol;
#X obj 489 -502 t b f;
#X obj 381 -473 expr (1000 / $f1) * $f2;
#X obj 381 -110 tabread4~ \$1;
#X obj 420 -332 r \$0-phasor_reset;
#X obj 488 -526 r \$0-speed;
#X obj -200 -598 s \$0-direction;
#X obj -162 -621 s \$0-speed;
#X obj 557 -526 loadbang;
#X msg 557 -502 1;
#X obj -124 -646 s \$0-goto;
#X obj -276 -544 s \$0-loophighpoint;
#X obj -238 -571 s \$0-looplowpoint;
#N canvas 242 22 781 389 direction 0;
#X obj 274 -303 f;
#X obj 274 -278 * 1;
#X obj 159 -325 t b f;
#X text 156 -373 direction;
#X obj 159 -350 r \$0-direction;
#X obj 274 -417 inlet;
#X obj 274 -186 outlet;
#X text 342 -288 multiply by either 1 or -1 \, with all inputs hot
;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 2 1 1 1;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X restore 381 -430 pd direction;
#X text 590 -239 position in recording out (0-1);
#N canvas 344 22 1338 984 phasor-reset! 0;
#X obj 456 -224 r \$0-loophighpoint;
#X obj 329 -211 r \$0-looplowpoint;
#X obj 243 -334 inlet~;
#X obj 387 253 s \$0-phasor_reset;
#X obj 403 24 r \$0-looplowpoint;
#X obj 388 48 f;
#X text 696 -449 forward: if min loopoint is more than current count
\, jump to min loopoint (forward) or max looppoint (reverse).;
#X obj 243 -142 edge~;
#X obj 389 -139 edge~;
#X text 698 -414 reverse: if max loopoint is less than current count
\, jump to min loopoint (forward) or max looppoint (reverse).;
#X text 236 -381 position in loop in (sig. 0-1);
#X text 501 254 send out to reset phasor position;
#X obj 419 105 r \$0-direction;
#X obj 851 -207 r \$0-loophighpoint;
#X obj 713 -317 r \$0-looplowpoint;
#X obj 766 51 f;
#X obj 621 -149 edge~;
#X obj 767 -136 edge~;
#X obj 781 27 r \$0-loophighpoint;
#X obj 386 199 spigot;
#X obj 467 200 spigot;
#X obj 419 145 + 1;
#X obj 500 143 expr ($f1 * -1) +1;
#X obj 456 -201 - 0.005;
#X obj 711 -273 + 0.005;
#X obj 242 -182 expr~ $v1 < $v2;
#X obj 621 -173 expr~ $v1 < $v2;
#X obj 369 -176 expr~ $v1 > $v2;
#X obj 765 -179 expr~ $v1 > $v2;
#X text 686 -463 comment;
#X connect 0 0 23 0;
#X connect 1 0 25 1;
#X connect 2 0 25 0;
#X connect 2 0 27 0;
#X connect 2 0 26 0;
#X connect 2 0 28 0;
#X connect 4 0 5 1;
#X connect 5 0 19 0;
#X connect 7 0 5 0;
#X connect 8 0 5 0;
#X connect 12 0 21 0;
#X connect 12 0 22 0;
#X connect 13 0 28 1;
#X connect 14 0 24 0;
#X connect 15 0 20 0;
#X connect 16 0 15 0;
#X connect 17 0 15 0;
#X connect 18 0 15 1;
#X connect 19 0 3 0;
#X connect 20 0 3 0;
#X connect 21 0 19 1;
#X connect 22 0 20 1;
#X connect 23 0 27 1;
#X connect 24 0 26 1;
#X connect 25 0 7 0;
#X connect 26 0 16 0;
#X connect 27 0 8 0;
#X connect 28 0 17 0;
#X restore 251 -265 pd phasor-reset!;
#N canvas 101 22 628 343 goto 0;
#X obj 154 -813 r \$0-goto;
#X obj 242 -813 r \$0-looplowpoint;
#X obj 154 -736 s \$0-phasor_reset;
#X obj 331 -791 r \$0-loophighpoint;
#X obj 154 -765 expr ($f1 * ($f3 - $f2)) + $f2;
#X text 153 -880 goto as a percentage of subloop length;
#X text 153 -860 (other option would be to clip goto to loop length
\, thus reducing resolution but giving a 1:1 visual);
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 3 0 4 2;
#X connect 4 0 2 0;
#X restore 961 -813 pd goto;
#N canvas 258 44 1330 853 play-stop-replay 0;
#X msg 551 197 0;
#X obj 469 113 f;
#X obj 551 133 r \$0-stop;
#X obj 469 -137 inlet;
#X obj 469 260 outlet;
#X obj 118 57 0;
#X obj 118 81 s \$0-phasor_reset;
#X text 594 173 allow for 2ms audio rampdown;
#X obj 551 173 del 3;
#X obj 252 51 del 3;
#X obj 469 -35 spigot;
#X obj 99 30 t b b b;
#X msg 501 -76 1;
#X msg 549 -75 0;
#X msg 576 -75 1;
#X msg 474 -76 0;
#X obj 696 -121 r \$0-stop;
#X text 656 -88 during play/replay \, if a new table is referenced
\, allow the new length through;
#X text 655 -55 when stopped \, store the new length but do not output.
;
#X obj 516 -35 spigot 1;
#X obj 549 -122 r \$0-start;
#X obj 619 -122 r \$0-resume;
#X obj 99 1 r \$0-start;
#X obj 252 13 r \$0-resume;
#X text 333 12 "resume": play from current position;
#X text 96 -23 "start": reset phase to 0 then play;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 2 0 8 0;
#X connect 3 0 10 0;
#X connect 3 0 19 0;
#X connect 5 0 6 0;
#X connect 8 0 0 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 9 0;
#X connect 11 1 5 0;
#X connect 12 0 10 1;
#X connect 13 0 19 1;
#X connect 14 0 19 1;
#X connect 15 0 10 1;
#X connect 16 0 14 0;
#X connect 16 0 15 0;
#X connect 19 0 1 1;
#X connect 20 0 12 0;
#X connect 20 0 13 0;
#X connect 21 0 13 0;
#X connect 21 0 12 0;
#X connect 22 0 11 0;
#X connect 23 0 9 0;
#X restore 381 -383 pd play-stop-replay;
#N canvas 800 22 761 823 audio-rampdown 0;
#X obj 267 -96 *~;
#X obj 295 -117 vline~;
#X msg 296 -153 1 2;
#X msg 323 -152 0 2;
#X obj 323 -177 r \$0-stop;
#X obj 266 -11 outlet~;
#X obj 266 -272 inlet~;
#X obj 296 -229 r \$0-start;
#X obj 304 -198 r \$0-resume;
#X connect 0 0 5 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 6 0 0 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X restore 381 -11 pd audio-rampdown;
#X obj 381 -511 t f f;
#X obj 381 -666 tosymbol;
#X obj 381 -611 var \$1_length 1;
#X msg 381 -638 set \$1_length;
#X obj 426 -174 samplerate~;
#X obj 426 -197 loadbang;
#X obj -48 -695 s \$0-buffer;
#X obj 258 -181 r \$0-buffer;
#X obj 961 -342 rec;
#X obj 962 -562 r \$0-buffer;
#X obj 961 -237 s \$0-start;
#X text 962 -585 autoplay;
#X obj 990 -415 loadbang;
#X obj 381 -690 r \$0-buffer;
#X obj 990 -391 zl reg \$1_recordstop;
#X obj -276 -836 route high low dir speed goto autoplay buffer;
#X obj -9 -814 tosymbol;
#X obj 32 -744 s \$0-stop;
#X obj -9 -790 sel start stop resume;
#X obj -9 -720 s \$0-start;
#X obj 73 -766 s \$0-resume;
#X obj -86 -671 s \$0-autoplay;
#X obj 961 -273 spigot 1;
#X obj 1006 -299 r \$0-autoplay;
#X text 991 -343 dynamically receive recordstop bangs;
#X obj 962 -534 t a b;
#X msg 1001 -505 recordstop;
#X obj 962 -481 zl join;
#X obj 962 -453 l2s _;
#X obj 539 -214 throw~ \$1_playhead;
#X obj -235 -869 r to.jblr.play.\$1;
#X obj 29 -653 s \$1_dyn_buffer;
#X connect 1 0 31 0;
#X connect 3 0 5 0;
#X connect 4 0 3 1;
#X connect 5 0 15 0;
#X connect 6 0 3 0;
#X connect 6 0 9 0;
#X connect 6 0 27 0;
#X connect 6 0 60 0;
#X connect 7 0 46 0;
#X connect 11 0 15 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 13 1 14 1;
#X connect 14 0 25 0;
#X connect 15 0 30 0;
#X connect 16 0 6 1;
#X connect 17 0 13 0;
#X connect 20 0 21 0;
#X connect 21 0 14 1;
#X connect 25 0 29 0;
#X connect 29 0 6 0;
#X connect 30 0 8 0;
#X connect 31 0 14 0;
#X connect 31 1 4 0;
#X connect 32 0 34 0;
#X connect 33 0 1 0;
#X connect 34 0 33 0;
#X connect 35 0 5 1;
#X connect 36 0 35 0;
#X connect 38 0 12 0;
#X connect 39 0 53 0;
#X connect 40 0 56 0;
#X connect 43 0 45 0;
#X connect 44 0 32 0;
#X connect 45 0 39 0;
#X connect 46 0 23 0;
#X connect 46 1 24 0;
#X connect 46 2 18 0;
#X connect 46 3 19 0;
#X connect 46 4 22 0;
#X connect 46 5 52 0;
#X connect 46 6 37 0;
#X connect 46 6 62 0;
#X connect 46 7 47 0;
#X connect 47 0 49 0;
#X connect 49 0 50 0;
#X connect 49 1 48 0;
#X connect 49 2 51 0;
#X connect 53 0 41 0;
#X connect 54 0 53 1;
#X connect 56 0 58 0;
#X connect 56 1 57 0;
#X connect 57 0 58 1;
#X connect 58 0 59 0;
#X connect 59 0 39 0;
#X connect 61 0 46 0;
